# JDPF
一个Java的数据持久化框架，代码仅有726行的简易小型框架  
## 本框架的特点
非常适合刚刚入门的初学者，因为此框架无需编写sql语句，这有点类似于Hibernate框架。但是与Hibernate框架相比，本框架的优势在于方便————使用者只需要创建若干个类，并保证每一个类的类名与待查询表的表名相同，且类中的属性名称也与表中的列名一致，即可轻松地实现数据库的增删改查等功能。而不需要像使用Hibernate框架那样费尽心思去调整与维护数据库表与实体类之间的映射，只需要保证名称相同，本框架会自动地处理各项映射关系。
## 使用方法
1.实体类类名对应数据库的表名，属性名称对应数据库表中的列名，并且在主键的属性上方或前方写上注解```@PrimaryKey```。  
2.调用```SqlConnector.regConnection```获取一个```SqlConnector```类的对象，但是需要手动添加对应数据库引擎的JAR包，并且通过如：```Class.forName("com.mysql.cj.jdbc.Driver")```的方式注册驱动。  
3.调用```SqlConnector.select```实现数据库查询，将参数对象中的```@ParimaryKey```的属性作为where的条件进行查询，查询后的数据会自动填充到参数的对象中。  
4.调用```SqlConnector.alter、SqlConnector.delete、SqlConnector.insert```可以分别进行数据修改、删除和插入。  
5.调用```SqlConnector.selectSome、SqlConnector.insertSome```可以查询或插入多条数据。  
## 基本原理
1.将每次的数据查询或修改操作封装成一个任务并将其放入SQL执行线程池的任务队列中。  
2.对于查询操作，首先查看缓冲区是否有对应的记录。如果有的话，则直接读取缓冲中的数据。如果没有，则创建数据库的连接，并将查询得到的数据添加进缓冲区。  
3.对于增加、删除、修改等操作，则是先通过数据库连接对数据库的数据进行修改。如果返回修改成功，则再修改缓冲区的数据。  
4.通过反射机制实现查看对象中的所有属性名和属性值，并以此自动生成SQL语句进行查询。再将查询的结果通过反射依次放进带查询的对象中。  
